{"version":4,"terraform_version":"1.10.6","serial":2,"lineage":"fe40907a-6859-1c47-4955-775172358850","outputs":{"droplet_ip":{"value":"174.138.72.185","type":"string"}},"resources":[{"mode":"data","type":"template_cloudinit_config","name":"user_data","provider":"provider[\"registry.opentofu.org/hashicorp/template\"]","instances":[{"schema_version":0,"attributes":{"base64_encode":false,"gzip":false,"id":"1549472984","part":[{"content":"#cloud-config\npackage_update: true\npackages:\n  - git\n  - ca-certificates\nruncmd:\n  - |\n    export DEBIAN_FRONTEND=noninteractive\n    apt-get update -y\n    apt-get install -y docker.io docker-compose-plugin\n  - usermod -aG docker root\n  - mkdir -p /opt/app\n  - cd /opt/app\n  - git clone --branch main https://github.com/art-83/habit-challange.git repo\n  - cd repo\n  - PUBLIC_IP=$(curl -s ifconfig.me)\n  - echo \"VITE_API_URL=http://$PUBLIC_IP:3000\" \u003e .env || true\n  - echo \"API_PORT=3000\" \u003e\u003e .env\n  - echo \"PG_HOST=database\" \u003e\u003e .env\n  - echo \"PG_USERNAME=postgres\" \u003e\u003e .env\n  - echo \"PG_PASSWORD=123456789\" \u003e\u003e .env\n  - echo \"PG_DATASOURCE=habit_names_db\" \u003e\u003e .env\n  - echo \"FRONTEND_URL=http://$PUBLIC_IP:5173\" \u003e\u003e .env\n  - cp .env backend/.env\n  - cp .env frontend/.env\n  - docker compose -f docker-compose.yml -f backend/docker-compose.yml -f frontend/docker-compose.yml up -d --build\n","content_type":"text/cloud-config","filename":"init.cfg","merge_type":""}],"rendered":"Content-Type: multipart/mixed; boundary=\"MIMEBOUNDARY\"\nMIME-Version: 1.0\r\n\r\n--MIMEBOUNDARY\r\nContent-Disposition: attachment; filename=\"init.cfg\"\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/cloud-config\r\nMime-Version: 1.0\r\n\r\n#cloud-config\npackage_update: true\npackages:\n  - git\n  - ca-certificates\nruncmd:\n  - |\n    export DEBIAN_FRONTEND=noninteractive\n    apt-get update -y\n    apt-get install -y docker.io docker-compose-plugin\n  - usermod -aG docker root\n  - mkdir -p /opt/app\n  - cd /opt/app\n  - git clone --branch main https://github.com/art-83/habit-challange.git repo\n  - cd repo\n  - PUBLIC_IP=$(curl -s ifconfig.me)\n  - echo \"VITE_API_URL=http://$PUBLIC_IP:3000\" \u003e .env || true\n  - echo \"API_PORT=3000\" \u003e\u003e .env\n  - echo \"PG_HOST=database\" \u003e\u003e .env\n  - echo \"PG_USERNAME=postgres\" \u003e\u003e .env\n  - echo \"PG_PASSWORD=123456789\" \u003e\u003e .env\n  - echo \"PG_DATASOURCE=habit_names_db\" \u003e\u003e .env\n  - echo \"FRONTEND_URL=http://$PUBLIC_IP:5173\" \u003e\u003e .env\n  - cp .env backend/.env\n  - cp .env frontend/.env\n  - docker compose -f docker-compose.yml -f backend/docker-compose.yml -f frontend/docker-compose.yml up -d --build\n\r\n--MIMEBOUNDARY--\r\n"},"sensitive_attributes":[]}]},{"mode":"managed","type":"digitalocean_droplet","name":"app","provider":"provider[\"registry.opentofu.org/digitalocean/digitalocean\"]","instances":[{"schema_version":1,"attributes":{"backup_policy":[],"backups":false,"created_at":"2025-09-26T20:50:17Z","disk":25,"droplet_agent":null,"graceful_shutdown":false,"id":"521094443","image":"ubuntu-22-04-x64","ipv4_address":"174.138.72.185","ipv4_address_private":"10.108.0.3","ipv6":false,"ipv6_address":"","locked":false,"memory":1024,"monitoring":false,"name":"selective-habit-app","price_hourly":0.00893,"price_monthly":6,"private_networking":true,"region":"nyc3","resize_disk":true,"size":"s-1vcpu-1gb","ssh_keys":["04:ab:01:b3:07:c1:63:b7:ed:1b:7a:c1:d4:5e:6a:ec"],"status":"active","tags":null,"timeouts":null,"urn":"do:droplet:521094443","user_data":"5183913b5b3ef478cb9121a2cb2b035dc4d909f6","vcpus":1,"volume_ids":[],"vpc_uuid":"79d7794f-bf83-49af-9ead-27dde6f6a45f"},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozNjAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwLCJ1cGRhdGUiOjM2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==","dependencies":["data.template_cloudinit_config.user_data","digitalocean_ssh_key.deployer"],"create_before_destroy":true}]},{"mode":"managed","type":"digitalocean_ssh_key","name":"deployer","provider":"provider[\"registry.opentofu.org/digitalocean/digitalocean\"]","instances":[{"schema_version":0,"attributes":{"fingerprint":"04:ab:01:b3:07:c1:63:b7:ed:1b:7a:c1:d4:5e:6a:ec","id":"51013811","name":"selective-habit-deployer","public_key":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCz52/3IRSvQCqUzkT0xGpZDUpjJkOf7jdglt37Rtu6JRd8IwGkS6rqaHnI7Z7A9CwU24iMkronS0YuL1kXMuo40kZqyxi6xszbTuNroabYnb2f3OEJjgPB/cNvIKy/dxiJ1d2wBIgT1Yf5boX98LVY8MNxyRkvtDD00JIH62LSotg0BLauoIU68LmWB21a2ANEld+bUoLXCA5BnfYCkqARg3z3SaDS9kTKIrjAwyKoUo2qWMuv6tkzpYvFb1jXEFR6Fh59RweTeIgaECWTfjtYfljD5J+azkMUmhmj1xd1aRBjhTVieuLJ3kHAJjD1dd8gY7pkCcb4jnglGse0BfI9lLPVgRcYY6ta1VA0vaZCwoxaRlZXT5D7w/vsLu7aT5LLE5SK0pzNZYCoOAI7EOQZAYZbWm3U3vpLgFldRPGh32DK7s0SGF0RCRze73hCusYKxXZTEaw0mCghhAB+anIN+OLPXoMj3CAlVw39CHWreiM3R703ZwJDPVohuNtOBx7VscVPlomhe9spMTqjPFiPJXbYeXmVmWVm9YO1GCWTkI86Auv8DLXtoET0DFaPASrzROB3WuiENrN4rb8dRofrvWogQI8KMS8XLAfrK4Hzthf5uPEJCN7/WZ0TWvHnb9zt4eTh/kN2EL60WlYtodbpRx1INrLjWWp+A8Nz785Bkw== deploy@selective-habit","timeouts":null},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDB9fQ==","create_before_destroy":true}]}],"check_results":null}
